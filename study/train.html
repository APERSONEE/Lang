<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lang</title>
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../css/sidebar.css">
    <link rel="stylesheet" href="../css/stylesheet.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.js" integrity="sha512-q/dWJ3kcmjBLU4Qc47E4A9kTB4m3wuTY7vkFJDTZKjTs8jhyGQnaUrxa0Ytd0ssMZhbNua9hE+E7Qv1j+DyZwA==" crossorigin="anonymous"></script>
    <script src="../javascript/Studysheet.js"></script>
    <script src="../javascript/LangError.js"></script>
    <script src="../javascript/train/train-utils.js"></script>
    <script src="../javascript/train/train-modes.js"></script>
    <script src="../javascript/utils.js"></script>
    <script src="../javascript/loadBalancer.js"></script>
    <script src="../javascript/popup.js"></script>
    <link rel="icon" href="../assets/logos/circular lang icon.png">
</head>
<style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700;900&display=swap');

.sideIconContainer {
    position: fixed;
    top: 0;
    left: 0;
    bottom: 0;

    width: 150px;

    display: flex;
    flex-direction: column;
    justify-content: space-between;
}

.mainPreTrainView {
    display: flex;
    flex-direction: column;

    align-items: center;
    justify-content: center;
    
    max-width: 600px;
    width: 95vw;
}
    .preTrainPanel {
        background-color: var(--primary-light);

        max-width: 500px;
        width: 95vw;

        border-radius: 25px;
        box-sizing: border-box;
        padding: 15px;
    }
        #toggleTrainOptions {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 20px;
            padding-right: 10px;
            border-top: 2px solid var(--primary-dark);
            cursor:pointer;
        }

    .preTrainInsert {
        max-width: 600px;
        width: 95vw;
        border-radius: 25px;

        box-sizing: border-box;
        padding: 15px;
        
        transition: height 0.25s, padding 0.25s;
    }
        .preTrainInsert > div {
            display: flex;
            width: 100%;

            margin-top: 6px;


            transition: opacity 0.25s;
        }
        .preTrainInsert > div > p {
            flex-basis: 200px;
        }
        .preTrainInsert > .inputOption > input {
            flex-grow: 1;
        }

        .preTrainInsert > .dropdownOption > div {
            flex-grow: 1;
            display: flex;
            justify-content: space-between;
            gap: 6px;
        }

        .preTrainInsert > .dropdownOption > div > button {
            flex: 1;
            font-size: 15px;
        }
        .preTrainInsert > .dropdownOption > div > .selected {
            background-color: var(--primary-light);
            color: var(--primary-dark);
        }
    
    #startButton {
        max-width: 300px;
        width: 95%;
        cursor:pointer;
        font-size: 20px;
        font-weight: 600;
    }

@media (max-width: 575px) {
    .preTrainInsert {

        /* set border radius to page width - 550px */
        border-radius: calc((100vw - 525px) / 2);
    }
}

input {
    background-color: var(--primary-light);
    color: var(--primary-dark);

    border: 2px solid var(--primary-dark);
    border-radius: 15px;
    font-family: "Poppins";

    padding: 10px;

    font-size: 15px;
}

button {
    background-color: var(--primary-dark);
    color: var(--primary-light);
    cursor:pointer;
    border: 2px solid var(--primary-light);
    border-radius: 15px;
    font-family: "Poppins";

    padding: 15px;

    transition: 0.25s;

    box-sizing: border-box;
}

button:hover {
    background-color: var(--primary-light);
    color: var(--primary-dark);
    border: 2px solid var(--primary-dark);
}

#informationAbt {
    width: 100vw;
    height: 100vh;

    display: flex;
    align-items: center;
    justify-content: center;
}

:root {
    --primary-dark: #001945;
    --primary-light: wheat;
}

.flexSpacer {
    flex: 1;
}

.lightGlow {
    -webkit-box-shadow:0px 0px 50px 0px var(--primary-light);
    -moz-box-shadow: 0px 0px 50px 0px var(--primary-light);
    box-shadow: 0px 0px 50px 0px var(--primary-light);
}
.centerText {
    text-align: center;
}



.multiplechoicefooter button {
    width: 40vw;
    max-width: 300px;

    height: 30vh;
    max-height: 150px;

    background-color: var(--primary-light);
    color: var(--primary-dark);
    font-size: 15px;
    font-family: Poppins;
    margin: 5px;
    border-radius: 15px;
    border: none;
}

#multchoice {
    margin: 0;
    padding: 0;
}




.panelContainer {
    width: 100vw;

    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
}


.answerContainer {
    max-width: 800px;
    width: 85vw;
    /* height: 250px; */
}

.submitButton {
    /* max-width: 400px; */
    flex: 1;
    height: 75px;
    
    margin-top: 10px;
}

#term {
flex: 1;
height: 75px;


border-top-right-radius: 25px;
border-top-left-radius: 25px;
}

.inputArea {
height: 175px;
width: 100%;
font-size: 2em;
text-align: left;
padding: 10px;

border-radius: 25px; 
transition: all 0.35s ease-in-out;

border: 1px solid var(--primary-light);
background-color: rgb(47, 61, 115);
color: var(--primary-light);

}
.bar{
    width: 0vw;
    height:2vh;
    transition: 0.5s;
}

    

.greyHover:hover {
    transform: scale(1.05);

}

.deselected:hover{
    opacity: 0.7;    
    background-color: #001945;
    color:#f5deb3;
    transform: scale(1.05);

}

.multipleChoiceButton:hover{
    transform: scale(1.03);
}

.multipleChoiceButton{
    transition:0.5s;
}

.nextButton {
    border-radius: 1000000px;
    height: 3vh;
    width: 10vw;
    padding: 1vh;
    background-color: var(--primary-dark);
    margin: 2vh;
    cursor: pointer;
    user-select: none;
}

.trainSaveStatus{
    position:absolute; 
    bottom:40px; 
    left:25px;
}

.syncing{
    animation: syncFade ease-in-out 2s infinite;
}

@keyframes syncFade{
    0%{
        opacity:100%;
    }
    50%{
        opacity:0%;
    }
    100%{
        opacity:100%;
    }
}
</style>
<body class="darkHomepage">
    <div class="bar lightGlow" style="background-color: wheat; position:absolute;" id="progBar"></div>
    <div class="bar lightGlow" style="background-color: rgba(255, 255, 255, 0.76); position:absolute; bottom:0;" id="groupBar"></div>
    <div id="completedTrain" class="absolute horizontalFlex centerFlex fullAbsolute" style="transition: all 0.15s ease-in-out; z-index:500; opacity: 0; pointer-events: none; background-color: rgba(0, 0, 0, 0.5);">
        <div class="verticalFlex centerFlex lightGlow centerText" style="z-index:500; border-radius: 15px; padding: 20px; width: 30vw; background-color: wheat;">
            <div style="margin-top: 10px; color:#001945; font-size:20px;"><strong>Congratulations! You have completed Train for this Studysheet.</strong></div>
            <div style="margin-top: 10px;">You can return to the Homepage or you can go back to the Study options.</div>
            <div class="button buttonHoverDark horizontalFlex centerFlex" style="width: 25%; margin-bottom: 0; " onclick="window.location.href='../homepage.html'">Home</div>
            <div class="button buttonHoverDark horizontalFlex centerFlex" style="width: 25%;" onclick="window.location.href=window.localStorage.getItem('back_link')">Study Options</div>
        </div>
    </div>

    <div class="rightSidebarContainer verticalFlex" style="z-index:1100; opacity:0; pointer-events: none;" id="shelf">
            
        <img src="../assets/logos/lang-wheat.png" style="height:10vh; position:fixed; top:3.5vh; cursor:pointer;" onclick="window.location.href='../homepage.html'">

        <div class="whiteBackdrop">
            <button class="lightGlow newbutton" onclick="window.location.href=window.localStorage.getItem('back_link')" ><img src="../assets/icons/blackBackButton.png"></button>
            <button class="lightGlow newbutton" style="cursor:pointer;" onclick="stats()" ><img src="../assets/icons/stats.png"></button>
            <button class="lightGlow newbutton" onclick="swappingPopup()"><img src="../assets/icons/swapTD.png"></button> 

            <button class="lightGlow newbutton" onclick="resetPopup()"><img src="../assets/icons/reset.png"></button>
        </div>

    </div>
    <img id="SaveStatus" src="../assets/icons/Train Online.svg" class = "trainSaveStatus" style="display:none;">
    <!-- <div class="horizontalFlex centerFlex" style="justify-content: space-between">
        <a href="studysheetpage.html">
            <img src="assets/icons/back.svg" style="left:0; top:0;">
        </a>
        <div style="text-align:center; position: absolute; justify-content: center; align-items: center; width:100%; pointer-events: none;">
            <h1 id="whatGroup" style="font-family:Poppins; color:wheat; "></h1>
            <h1 id="whatPercent" style="font-family:Poppins; color:wheat;"></h1>
        </div>
        <img src="assets/logos/lang-wheat.png" class="topleftlogoicon" onclick="window.location.href='/homepage.html'" style="margin-right:40px; margin-top:40px;">
    </div> -->

    <div id="topBar">
        <div class="centerText">
            <h1 id="whatGroup" style="font-family:Poppins; color:wheat; "></h1>
            <h1 id="whatPercent" style="font-family:Poppins; color:wheat;"></h1>
        </div>
    </div>

    <div id="informationAbt">
        <div class="sideIconContainer">
            <img src="../assets/logos/circular lang icon.png" style="padding: 20px; aspect-ratio: 1" onclick="window.location.href = '../homepage.html'">
            <img src="../assets/icons/back.svg" style="aspect-ratio: 1; cursor:pointer;" onclick="window.location.href = '../studysheetpage.html'">
        </div>

        <div class="mainPreTrainView">
            <h1 style="font-size: 40px; color: var(--primary-light);">Train</h1>
            <div class="preTrainPanel" style="border-bottom-left-radius: 0; border-bottom-right-radius: 0; padding-bottom: 0;">
                Train allows you to dynamically learn your Studysheet.
                <div style="margin-top: 4px;"></div>
                Cycle through rounds of learning, multiple choice, and write-in to gain long-term memory.
                <div id="toggleTrainOptions">
                    <p>Show Options</p>
                    <img style="height: 25px;" src="../assets/icons/upArrow.png">
                </div>
            </div>
            <div class="whiteBackdrop preTrainInsert">
                <div class="inputOption">
                    <p>Terms per Group</p>
                    <input type="number" id="termsperround" value="5" min="1" max="100">
                </div>
                <div class="dropdownOption">
                    <p>Shuffle Questions:</p>
                    <div>
                        <button class = "selected" id="shuffledSwap" onclick="shuffler(this, document.getElementById('orderedSwap'))">No</button>
                        <button class="deselected" id="orderedSwap" onclick="shuffler(this, document.getElementById('shuffledSwap'))">Yes</button>
                    </div>
                </div>
                <div class="dropdownOption">
                    <p>Answer With:</p>
                    <div>
                        <button class = "selected" id="termSwap" onclick="swapper(this, document.getElementById('defSwap'))">Term</button>
                        <button class="deselected" id="defSwap" onclick="swapper(this, document.getElementById('termSwap'))">Definition</button>
                    </div>
                </div>
                
            </div>
            <div class="preTrainPanel flexCentered" style="border-top-left-radius: 0; border-top-right-radius: 0;">
                <button id="startButton" onclick="startTrain()">Start</button>
            </div>
        </div>

    </div>
    
    <div style="width:100vw; height:80vh; align-items: center; text-align: center; color:#001945; align-items: center; display:none;" id="TermAndDef">
        <div class="" style="text-align:left; border-radius: 20px; width: 50vw; margin: auto; margin-bottom:0px; height:50vh;">
            <div style="height:100%; display:flex; flex-direction: column; justify-content: center;">
                <div id="term_image_learn" class="horizontalFlex centerFlex" style="display:none;">
                    <img src="../output.png" alt="Image Preview" style="margin-top: 10px; width: auto; height: 250px; border-radius: 25px;">
                </div>
                <div>
                    <h1 style="font-size: auto; margin: 20px; margin-bottom: 0px; height:fit-content; color:wheat; font-weight: bold;" id="term">
                        Term
                    </h1>
                    <hr style="border-top:3px solid #f5deb3; color:#001945; background-color: #001945; margin-left: 20px; margin-right:20px;">
                </div>
                
                <div style="width:100%; text-align:left; margin-left:20px;" >
                    <h3 style="font-size:1.5vw; color: white; font-weight: 400;" id="def">
                        Definition of the term
                    </h3>
                </div>
            </div>
            
        </div>
        <button class="dropbtn greyHover" style="margin-top: 20px; background-color:white; opacity:0.75;" onclick="advanceTrain(true)">Continue</button>
    </div>   

    


    
    <div class="multiplechoice" style = "height:100%; display:none; flex-direction: column; justify-content: center;" id="multchoice">
        <!-- <h1 id="questionheader" class="header" style="color:wheat;">Multiple Choice</h1>
        
        <br>
        <br>
        <div class="multiplechoicefooter">
            <div>
                <button style="width:20vw; height:20vh; background-color: wheat; color:#001945; font-size: 2vh; font-family: Poppins; margin:5px; border-radius: 15px;" id = "a">A</button>
                <button style="width:20vw; height:20vh; background-color: wheat; color:#001945; font-size: 2vh; font-family: Poppins; margin:5px; border-radius: 15px;" id = "b">B</button>
            </div>
            <div>
                <button style="width:20vw; height:20vh; background-color: wheat; color:#001945; font-size: 2vh; font-family: Poppins; margin:5px; border-radius: 15px;" id = "c">C</button>
                <button style="width:20vw; height:20vh; background-color: wheat; color:#001945; font-size: 2vh; font-family: Poppins; margin:5px; border-radius: 15px;" id = "d">D</button>
            </div>
                
        </div> -->

        <div class="horizontalFlex centerFlex" style="flex-direction: column; ">
            <div id="term_image_mcq" class="horizontalFlex centerFlex" style="display:none;">
                <img src="../output.png" alt="Image Preview" style="width: auto; height: 250px; border-radius: 25px;">
            </div>

            <h1 id="questionheader" class="centerText" style="color: var(--primary-light);">Multiple Choice</h1>
            <div class="multiplechoicefooter" style="background-color: #ffffff44; padding:15px; border-radius:20px;">
                <div style="display:flex; flex-direction:row; align-items:center;">
                    <button id = "a" class="multipleChoiceButton" onclick="correctMultiChoice('a')">A</button>
                    <button id = "b" class="multipleChoiceButton" onclick="correctMultiChoice('b')">B</button>
                </div>
                <div style="display:flex; flex-direction:row; align-items:center;">
                    <button id = "c" class="multipleChoiceButton" onclick="correctMultiChoice('c')">C</button>
                    <button id = "d" class="multipleChoiceButton" onclick="correctMultiChoice('d')">D</button>
                </div>
            </div>
        </div>

    </div>


    <div class="inputdiv panelContainer" style="display: none; height:100%;" id="write">
        <div class="panelContainer">
            <div class="horizontalFlex centerFlex">
                <!-- <div class="noverticalshow correctIncorrect lightGlow" style="height: 0;"></div> -->
                <div class="answerContainer horizontalFlex centerFlex" style="color: wheat; font-size: 40px; margin-bottom: 20px; text-align: center; font-weight: bold;" id="displayWord">
                    No Studysheet Detected.
                </div>
            </div>
            <div id="term_image" class= "horizontalFlex centerFlex" style="margin-bottom: 10px; display:none;">
                <img src="../output.png" alt="Image Preview" style="width: auto; height: 250px; border-radius: 25px;">
            </div>
            <div class="horizontalFlex centerFlex">
                <div class="answerContainer">
                    <input class="inputArea lightGlow" id="input" spellcheck="false">
                </div>
            </div>
            <div class="horizontalFlex centerFlex">
                <div class="answerContainer horizontalFlex centerFlex">
                    <div style="border-radius: 25px; flex: 2; background-color: wheat;" class="horizontalFlex centerFlex buttonHover submitButton lightGlow" id="goButton" onclick="checkWrite()">> Go!</div>
                </div>
            </div>
            <!-- <div style="color:wheat; font-family: Poppins; text-align: center; font-size: 2.2vw; bottom:4vh; position:absolute; font-weight:bold; width:100%;" id="wherearewe">correct answer: sussy</div> -->
        </div>
    </div>

    <!-- <div class="inputdiv">
        <h1 class="displayWord" id="displayWord" style="margin:40px;"></h1>
    </div>
    <div class="inputdiv">
        
        <div style="display:flex; flex-direction:column; justify-content: center; text-align: center; align-items: center;">
            <input class="input" id="input">
            
        </div>
        
        <button class="goButton" id="goButton" onclick="checkTrain()"></button>
    </div> -->


    
</body>
<script>
    var optionsHidden = true;
    var isChangingOptions = false;
    var optionsHeight = document.getElementsByClassName("preTrainInsert")[0].offsetHeight;
    function toggleOptions() {
        if (isChangingOptions) return;
        isChangingOptions = true;

        let options = document.getElementsByClassName("preTrainInsert")[0];
        let toggle = document.getElementById("toggleTrainOptions").children[1];

        if (optionsHidden) {
            toggle.style.transform = "rotate(270deg)";

            // get the current height of options, set its height, iterate over all elements and make them display: none, then set its height to 0
            optionsHeight = options.offsetHeight;
            options.style.height = optionsHeight + "px";
            for (let i = 0; i < options.children.length; i++) {
                options.children[i].style.opacity = "0";
                options.children[i].style.pointerEvents = "none";
            }
            setTimeout(() => {
                options.style.height = "0px";
                options.style.padding = "0px";
                isChangingOptions = false;
            }, 250);
        } else {
            toggle.style.transform = "rotate(180deg)";

            options.style.height = optionsHeight + "px";
            options.style.padding = "15px";
            setTimeout(() => {
                for (let i = 0; i < options.children.length; i++) {
                    options.children[i].style.opacity = "1";
                    options.children[i].style.pointerEvents = "all";
                }
                isChangingOptions = false;
            }, 250);
        }
        
        optionsHidden = !optionsHidden;
    }
    setTimeout(() => {
        toggleOptions();
        document.getElementsByClassName("preTrainInsert")[0].style.height = "0px";
        document.getElementsByClassName("preTrainInsert")[0].style.padding = "0px";
    }, 100);

    document.getElementById("toggleTrainOptions").addEventListener("click", toggleOptions);
</script>
<script src="../javascript/train/train-logic.js"></script>
<script src="../javascript/sidebar.js"></script>
</html>